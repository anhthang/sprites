import os
import requests
import re

# The list of URLs you provided
urls = [
    "https://www.smogon.com/forums/attachments/869_1-png.218736/",
    "https://www.smogon.com/forums/attachments/869_1b-png.266112/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_2-png.218738/",
    "https://www.smogon.com/forums/attachments/869_2b-png.266114/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_3-png.218740/",
    "https://www.smogon.com/forums/attachments/869_3b-png.266116/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_4-png.218742/",
    "https://www.smogon.com/forums/attachments/869_4b-png.266118/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_5-png.218744/",
    "https://www.smogon.com/forums/attachments/869_5b-png.266120/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_6-png.218746/",
    "https://www.smogon.com/forums/attachments/869_6b-png.266122/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_7-png.218748/",
    "https://www.smogon.com/forums/attachments/869_7b-png.266124/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_8-png.218750/",
    "https://www.smogon.com/forums/attachments/869_8b-png.266126/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_9-png.218751/",
    "https://www.smogon.com/forums/attachments/869_9b-png.266127/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_10-png.218752/",
    "https://www.smogon.com/forums/attachments/869_10b-png.266128/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_11-png.218753/",
    "https://www.smogon.com/forums/attachments/869_11b-png.266129/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_12-png.218754/",
    "https://www.smogon.com/forums/attachments/869_12b-png.266130/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_13-png.218755/",
    "https://www.smogon.com/forums/attachments/869_13b-png.266131/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_14-png.218756/",
    "https://www.smogon.com/forums/attachments/869_14b-png.266132/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_15-png.218757/",
    "https://www.smogon.com/forums/attachments/869_15b-png.266133/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_16-png.218758/",
    "https://www.smogon.com/forums/attachments/869_16b-png.266134/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_17-png.218759/",
    "https://www.smogon.com/forums/attachments/869_17b-png.266135/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_18-png.218760/",
    "https://www.smogon.com/forums/attachments/869_18b-png.266136/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_19-png.218761/",
    "https://www.smogon.com/forums/attachments/869_19b-png.266137/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_20-png.218762/",
    "https://www.smogon.com/forums/attachments/869_20b-png.266138/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_21-png.218763/",
    "https://www.smogon.com/forums/attachments/869_21b-png.266139/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_22-png.218764/",
    "https://www.smogon.com/forums/attachments/869_22b-png.266140/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_23-png.218765/",
    "https://www.smogon.com/forums/attachments/869_23b-png.266141/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_24-png.218766/",
    "https://www.smogon.com/forums/attachments/869_24b-png.266142/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_25-png.218767/",
    "https://www.smogon.com/forums/attachments/869_25b-png.266143/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_26-png.218768/",
    "https://www.smogon.com/forums/attachments/869_26b-png.266144/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_27-png.218769/",
    "https://www.smogon.com/forums/attachments/869_27b-png.266145/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_28-png.218770/",
    "https://www.smogon.com/forums/attachments/869_28b-png.266146/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_29-png.218771/",
    "https://www.smogon.com/forums/attachments/869_29b-png.266147/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_30-png.218772/",
    "https://www.smogon.com/forums/attachments/869_30b-png.266148/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_31-png.218773/",
    "https://www.smogon.com/forums/attachments/869_31b-png.266149/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_32-png.218774/",
    "https://www.smogon.com/forums/attachments/869_32b-png.266150/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_33-png.218775/",
    "https://www.smogon.com/forums/attachments/869_33b-png.266151/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_34-png.218776/",
    "https://www.smogon.com/forums/attachments/869_34b-png.266152/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_35-png.218777/",
    "https://www.smogon.com/forums/attachments/869_35b-png.266153/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_36-png.218778/",
    "https://www.smogon.com/forums/attachments/869_36b-png.266154/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_37-png.218779/",
    "https://www.smogon.com/forums/attachments/869_37b-png.266155/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_38-png.218780/",
    "https://www.smogon.com/forums/attachments/869_38b-png.266156/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_39-png.218781/",
    "https://www.smogon.com/forums/attachments/869_39b-png.266157/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_40-png.218782/",
    "https://www.smogon.com/forums/attachments/869_40b-png.266158/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_41-png.218783/",
    "https://www.smogon.com/forums/attachments/869_41b-png.266159/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_42-png.218784/",
    "https://www.smogon.com/forums/attachments/869_42b-png.266160/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_43-png.218785/",
    "https://www.smogon.com/forums/attachments/869_43b-png.266161/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_44-png.218786/",
    "https://www.smogon.com/forums/attachments/869_44b-png.266162/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_45-png.218787/",
    "https://www.smogon.com/forums/attachments/869_45b-png.266163/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_46-png.218788/",
    "https://www.smogon.com/forums/attachments/869_46b-png.266164/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_47-png.218789/",
    "https://www.smogon.com/forums/attachments/869_47b-png.266165/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_48-png.218790/",
    "https://www.smogon.com/forums/attachments/869_48b-png.266166/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_49-png.218791/",
    "https://www.smogon.com/forums/attachments/869_49b-png.266167/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_50-png.218792/",
    "https://www.smogon.com/forums/attachments/869_50b-png.266168/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_51-png.218793/",
    "https://www.smogon.com/forums/attachments/869_51b-png.266169/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_52-png.218794/",
    "https://www.smogon.com/forums/attachments/869_52b-png.266170/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_53-png.218795/",
    "https://www.smogon.com/forums/attachments/869_53b-png.266171/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_54-png.218796/",
    "https://www.smogon.com/forums/attachments/869_54b-png.266172/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_55-png.218797/",
    "https://www.smogon.com/forums/attachments/869_55b-png.266173/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_56-png.218798/",
    "https://www.smogon.com/forums/attachments/869_56b-png.266174/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
    "https://www.smogon.com/forums/attachments/869_57-png.218799/",
    "https://www.smogon.com/forums/attachments/869_57b-png.266175/",
    "https://www.smogon.com/forums/attachments/869_1s-png.218737/",
    "https://www.smogon.com/forums/attachments/869_1sb-png.266113/",
    "https://www.smogon.com/forums/attachments/869_58-png.218800/",
    "https://www.smogon.com/forums/attachments/869_58b-png.266176/",
    "https://www.smogon.com/forums/attachments/869_2s-png.218739/",
    "https://www.smogon.com/forums/attachments/869_2sb-png.266115/",
    "https://www.smogon.com/forums/attachments/869_59-png.218801/",
    "https://www.smogon.com/forums/attachments/869_59b-png.266177/",
    "https://www.smogon.com/forums/attachments/869_3s-png.218741/",
    "https://www.smogon.com/forums/attachments/869_3sb-png.266117/",
    "https://www.smogon.com/forums/attachments/869_60-png.218802/",
    "https://www.smogon.com/forums/attachments/869_60b-png.266178/",
    "https://www.smogon.com/forums/attachments/869_4s-png.218743/",
    "https://www.smogon.com/forums/attachments/869_4sb-png.266119/",
    "https://www.smogon.com/forums/attachments/869_61-png.218803/",
    "https://www.smogon.com/forums/attachments/869_61b-png.266179/",
    "https://www.smogon.com/forums/attachments/869_5s-png.218745/",
    "https://www.smogon.com/forums/attachments/869_5sb-png.266121/",
    "https://www.smogon.com/forums/attachments/869_62-png.218804/",
    "https://www.smogon.com/forums/attachments/869_62b-png.266180/",
    "https://www.smogon.com/forums/attachments/869_6s-png.218747/",
    "https://www.smogon.com/forums/attachments/869_6sb-png.266123/",
    "https://www.smogon.com/forums/attachments/869_63-png.218805/",
    "https://www.smogon.com/forums/attachments/869_63b-png.266181/",
    "https://www.smogon.com/forums/attachments/869_7s-png.218749/",
    "https://www.smogon.com/forums/attachments/869_7sb-png.266125/",
]

# Set a User-Agent to prevent Smogon from blocking the request
HEADERS = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.31"
}


def download_sprites():
    if not os.path.exists("downloads"):
        os.makedirs("downloads")
        print("üìÅ Created 'downloads' directory.")

    print(f"üöÄ Starting download of {len(urls)} files...")

    for url in urls:
        try:
            # 1. Extract filename from URL
            # Example: 652sb-png.492504/ -> 652sb.png
            match = re.search(r"attachments/([\w-]+)-png\.\d+/?", url)
            if match:
                base_name = match.group(1)
                filename = f"{base_name}.png"
            else:
                # Fallback if regex fails
                filename = url.split("/")[-2].split("-")[0] + ".png"

            save_path = os.path.join("downloads", filename)

            # 2. Download the file
            response = requests.get(url, headers=HEADERS, stream=True)

            if response.status_code == 200:
                with open(save_path, "wb") as f:
                    for chunk in response.iter_content(chunk_size=8192):
                        f.write(chunk)
                print(f"‚úÖ Downloaded: {filename}")
            else:
                print(f"‚ùå Failed: {url} (Status: {response.status_code})")

        except Exception as e:
            print(f"‚ö†Ô∏è Error downloading {url}: {e}")

    print("\n" + "=" * 30)
    print("Download process finished.")
    print(f"Files are located in: {os.path.abspath('downloads')}")
    print("=" * 30)


if __name__ == "__main__":
    download_sprites()
